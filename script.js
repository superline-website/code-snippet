const copyIconSVG = `<svg width="100%" height="100%" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
<path fill-rule="evenodd" clip-rule="evenodd" d="M14.2885 2.5433C13.7744 2.5013 13.1142 2.50065 12.167 2.50065H6.25033C5.79009 2.50065 5.41699 2.12756 5.41699 1.66732C5.41699 1.20708 5.79009 0.833985 6.25033 0.833985L12.2027 0.833985C13.1058 0.833976 13.8343 0.83397 14.4242 0.882166C15.0316 0.931791 15.565 1.03663 16.0586 1.28812C16.8426 1.6876 17.4801 2.32502 17.8795 3.10902C18.131 3.6026 18.2359 4.13609 18.2855 4.74346C18.3337 5.33336 18.3337 6.06181 18.3337 6.96496V12.9173C18.3337 13.3776 17.9606 13.7507 17.5003 13.7507C17.0401 13.7507 16.667 13.3776 16.667 12.9173V7.00065C16.667 6.05348 16.6663 5.39322 16.6243 4.87918C16.5831 4.37488 16.5063 4.08514 16.3945 3.86567C16.1548 3.39527 15.7724 3.01282 15.302 2.77314C15.0825 2.66131 14.7928 2.5845 14.2885 2.5433ZM5.13487 3.75065H11.9491C12.3884 3.75064 12.7674 3.75062 13.0795 3.77613C13.409 3.80304 13.7367 3.86247 14.052 4.02314C14.5224 4.26282 14.9048 4.64527 15.1445 5.11567C15.3052 5.43099 15.3646 5.75867 15.3915 6.08813C15.417 6.40028 15.417 6.77925 15.417 7.21855V14.0328C15.417 14.4721 15.417 14.851 15.3915 15.1632C15.3646 15.4926 15.3052 15.8203 15.1445 16.1356C14.9048 16.606 14.5224 16.9885 14.052 17.2282C13.7367 17.3888 13.409 17.4483 13.0795 17.4752C12.7674 17.5007 12.3884 17.5007 11.9491 17.5007H5.13486C4.69557 17.5007 4.31661 17.5007 4.00447 17.4752C3.67502 17.4483 3.34733 17.3888 3.03202 17.2282C2.56161 16.9885 2.17916 16.606 1.93948 16.1356C1.77882 15.8203 1.71939 15.4926 1.69247 15.1632C1.66697 14.851 1.66698 14.4721 1.66699 14.0328V7.21853C1.66698 6.77924 1.66697 6.40027 1.69247 6.08813C1.71939 5.75867 1.77882 5.43099 1.93948 5.11567C2.17916 4.64527 2.56161 4.26282 3.03202 4.02314C3.34733 3.86247 3.67502 3.80304 4.00447 3.77613C4.31661 3.75062 4.69558 3.75064 5.13487 3.75065ZM4.14019 5.43726C3.9138 5.45575 3.82987 5.48715 3.78867 5.50815C3.63187 5.58804 3.50438 5.71552 3.42449 5.87233C3.40349 5.91353 3.3721 5.99746 3.3536 6.22385C3.33431 6.45996 3.33366 6.77019 3.33366 7.25065V14.0007C3.33366 14.4811 3.33431 14.7913 3.3536 15.0275C3.3721 15.2538 3.40349 15.3378 3.42449 15.379C3.50438 15.5358 3.63187 15.6633 3.78867 15.7432C3.82987 15.7641 3.9138 15.7955 4.14019 15.814C4.37631 15.8333 4.68653 15.834 5.16699 15.834H11.917C12.3975 15.834 12.7077 15.8333 12.9438 15.814C13.1702 15.7955 13.2541 15.7641 13.2953 15.7432C13.4521 15.6633 13.5796 15.5358 13.6595 15.379C13.6805 15.3378 13.7119 15.2538 13.7304 15.0275C13.7497 14.7913 13.7503 14.4811 13.7503 14.0007V7.25065C13.7503 6.77019 13.7497 6.45996 13.7304 6.22385C13.7119 5.99746 13.6805 5.91353 13.6595 5.87233C13.5796 5.71552 13.4521 5.58804 13.2953 5.50815C13.2541 5.48715 13.1702 5.45575 12.9438 5.43726C12.7077 5.41797 12.3975 5.41732 11.917 5.41732H5.16699C4.68653 5.41732 4.37631 5.41797 4.14019 5.43726Z" fill="white"/>
</svg>`;
const doneIconSVG = `<svg width="100%" height="100%" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
<path fill-rule="evenodd" clip-rule="evenodd" d="M20.7071 4.29289C21.0976 4.68342 21.0976 5.31658 20.7071 5.70711L9.70711 16.7071C9.31658 17.0976 8.68342 17.0976 8.29289 16.7071L3.29289 11.7071C2.90237 11.3166 2.90237 10.6834 3.29289 10.2929C3.68342 9.90237 4.31658 9.90237 4.70711 10.2929L9 14.5858L19.2929 4.29289C19.6834 3.90237 20.3166 3.90237 20.7071 4.29289Z" fill="white"/>
</svg>`;

document.querySelectorAll(".w-embed").forEach((embed) => {
  const codeBlock = embed.querySelector("pre code");
  if (codeBlock) {
    const container = document.createElement("div");
    container.className = "sl_code_snippet--copy_container";
    embed.classList.add("sl_code_snippet--embed");

    const img = document.createElement("div");
    img.className = "sl_code_snippet--copy_icn";
    img.innerHTML = copyIconSVG;
    container.appendChild(img);
    embed.appendChild(container);

    container.addEventListener("click", async () => {
      await navigator.clipboard.writeText(codeBlock.textContent);
      img.innerHTML = doneIconSVG;
      setTimeout(() => (img.innerHTML = copyIconSVG), 1000);
    });
  }
});
